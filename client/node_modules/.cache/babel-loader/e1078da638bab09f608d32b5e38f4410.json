{"ast":null,"code":"import { logout } from \"./store/actions/account.actions\";\nimport React from \"react\";\nimport APP_CONST from \"./common/contant\";\n\n//class IdleTimer {\nclass IdleTimer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.timeout = void 0;\n    this.onTimeout = void 0;\n    this.interval = void 0;\n    this.timeoutTracker = void 0;\n    this.eventHandler = void 0;\n    this.onExpired = void 0;\n    this.timeout = props.timeout;\n    this.onTimeout = props.onTimeout;\n    this.onExpired = props.onExpired;\n    const localStorage_expiredTime = 0;\n\n    //const [isTimeout, setIsTimeout] = useState(false);\n\n    const expiredTime = parseInt(localStorage_expiredTime, 10);\n    if (expiredTime > 0 && expiredTime < Date.now()) {\n      this.onExpired();\n      return;\n    }\n    this.eventHandler = this.updateExpiredTime.bind(this);\n    this.tracker();\n    this.startInterval();\n  }\n  startInterval() {\n    this.updateExpiredTime();\n    this.interval = setInterval(() => {\n      const localStorage_expiredTime = localStorage.getItem(\"_expiredTime\");\n      const expiredTime = parseInt(localStorage_expiredTime, 10);\n      if (expiredTime < Date.now()) {\n        if (this.onTimeout) {\n          this.onTimeout();\n          this.cleanUp();\n        }\n      }\n    }, 1000);\n  }\n  updateExpiredTime() {\n    if (this.timeoutTracker) {\n      clearTimeout(this.timeoutTracker);\n    }\n    this.timeoutTracker = setTimeout(() => {\n      const tilee = Date.now() + APP_CONST.AUTO_LOGOUT_TIME * 1000;\n      localStorage.setItem(\"_expiredTime\", tilee);\n    }, 300);\n  }\n  tracker() {\n    window.addEventListener(\"mousemove\", this.updateExpiredTime);\n    window.addEventListener(\"scroll\", this.updateExpiredTime);\n    window.addEventListener(\"keydown\", this.updateExpiredTime);\n  }\n  cleanUp() {\n    localStorage.removeItem(\"_expiredTime\");\n    clearInterval(this.interval);\n    window.removeEventListener(\"mousemove\", this.eventHandler);\n    window.removeEventListener(\"scroll\", this.eventHandler);\n    window.removeEventListener(\"keydown\", this.eventHandler);\n    logout();\n    window.location.replace(APP_CONST.LOGIN_URL);\n    // this.context.router.push(\"/path\")\n  }\n}\n\nexport default IdleTimer;","map":{"version":3,"names":["logout","React","APP_CONST","IdleTimer","Component","constructor","props","timeout","onTimeout","interval","timeoutTracker","eventHandler","onExpired","localStorage_expiredTime","expiredTime","parseInt","Date","now","updateExpiredTime","bind","tracker","startInterval","setInterval","localStorage","getItem","cleanUp","clearTimeout","setTimeout","tilee","AUTO_LOGOUT_TIME","setItem","window","addEventListener","removeItem","clearInterval","removeEventListener","location","replace","LOGIN_URL"],"sources":["C:/iDASnew/client/src/IdleTimer.tsx"],"sourcesContent":["\r\nimport { logout } from \"./store/actions/account.actions\";\r\n \r\nimport React  from \"react\";\r\nimport APP_CONST from \"./common/contant\"; \r\n\r\n//class IdleTimer {\r\n  class  IdleTimer   extends  React.Component {\r\n  timeout: any;\r\n  onTimeout: any;\r\n  interval: any;\r\n  timeoutTracker: any;\r\n  eventHandler: any;\r\n  onExpired: any;\r\n   \r\n constructor(props: any ) {\r\n  super(props);\r\n  \r\n    this.timeout = props.timeout;\r\n    this.onTimeout = props.onTimeout;\r\n    this.onExpired = props.onExpired;\r\n \r\n    const localStorage_expiredTime: any = 0;\r\n \r\n    //const [isTimeout, setIsTimeout] = useState(false);\r\n\r\n    const expiredTime = parseInt(localStorage_expiredTime, 10);\r\n \r\n\r\n    if (expiredTime > 0 && expiredTime < Date.now()) {  \r\n      this.onExpired();\r\n      return;\r\n    }\r\n \r\n    this.eventHandler = this.updateExpiredTime.bind(this);\r\n \r\n    this.tracker(); \r\n    this.startInterval();  \r\n  } \r\n \r\n  startInterval() {\r\n    this.updateExpiredTime();\r\n\r\n    this.interval = setInterval(() => {\r\n      const localStorage_expiredTime: any = localStorage.getItem(\"_expiredTime\"); \r\n      const expiredTime = parseInt(localStorage_expiredTime, 10); \r\n\r\n      if (expiredTime < Date.now()) {\r\n  \r\n        if (this.onTimeout) {\r\n          this.onTimeout();\r\n          this.cleanUp();\r\n        }\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  updateExpiredTime() { \r\n    if (this.timeoutTracker) {\r\n      clearTimeout(this.timeoutTracker);\r\n    }\r\n    this.timeoutTracker = setTimeout(() => {\r\n      const tilee: any = Date.now() + APP_CONST.AUTO_LOGOUT_TIME * 1000;   \r\n      localStorage.setItem(\"_expiredTime\", tilee);\r\n    }, 300);\r\n  }\r\n\r\n  tracker() { \r\n    window.addEventListener(\"mousemove\", this.updateExpiredTime);\r\n    window.addEventListener(\"scroll\", this.updateExpiredTime);\r\n    window.addEventListener(\"keydown\", this.updateExpiredTime);\r\n  }\r\n\r\n  cleanUp() {\r\n    localStorage.removeItem(\"_expiredTime\");\r\n    clearInterval(this.interval);\r\n    window.removeEventListener(\"mousemove\", this.eventHandler);\r\n    window.removeEventListener(\"scroll\", this.eventHandler);\r\n    window.removeEventListener(\"keydown\", this.eventHandler);\r\n    logout(); \r\n    window.location.replace(APP_CONST.LOGIN_URL);\r\n   // this.context.router.push(\"/path\")\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default IdleTimer;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}